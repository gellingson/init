{% extends "listings/carbyrbase.html" %}
{% load account %}

{% block page %}
<div class="container">
  <h1>{% user_display user %}'s Dashboard</h1>
  <h5>Favorite Searches</h5>
  {% if request.session.FQL %}
  {% for search in request.session.FQL %}
  <a class="btn btn-default" href="/cars/?s={{ search.ref }}"><span class="glyphicon glyphicon-heart"></span>{{ search.descr }}</a>
  {% endfor %}
  {% else %}
  <p>You do not have any favorite searches defined. You can save any search as a favorite, which makes it very easy to watch for cars you want. Favorite searches can show you only new (or updated) listings since the last time you checked, or can even push cars to you as soon as they are posted via your choice of email or a custom RSS feed.<span>[some features still being implemented]</span></p>
  {% endif %}
  <h5>Favorite Cars</h5>
  <p>Here are the cars you have saved:</p>
	<div class="listings">
	  {% if listings %}
	  {% for item in listings %}
	  <div class="row listing-row">
		<a href='{{ item.listing_href }}'>
		  <div class="col-md-4 listing">
			<div class="imgcropper">
			  {% if item.pic_href %}
			  <img class="img-rounded" src='{{ item.pic_href }}'>
			  {% else %}
			  <p> No photo available. </p>
			  {% endif %}
			</div>
		  </div>
		  <div class="col-md-4 listing">
			<p><strong>{{ item.model_year }} {{ item.make }} {{ item.model}}</strong></p>
			<p><strong>{{ item.price }}</strong></p>
			{% if item.location_text %}
			<p>{{item.location_text}} ({{ item.source }})</p>
			{% else %}
			<p>({{ item.source }})</p>
			{% endif %}
		  </div>
		  <div class="col-md-6 listing">{{ item.listing_text }}
		  </div>
		</a>
	  </div>
	  {% endfor %}
	  {% else %}
	  <p>You have no saved cars. If you mark a car as of interest from the search results it will appear here for easy reference.</p>
	  {% endif %}
	</div>
</div>
{% endblock page %}
